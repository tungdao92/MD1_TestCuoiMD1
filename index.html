<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
<h1 align="center">Category</h1>
<div class="input-group mb-3">
    <input id="newCategory" type="text" style="width: 30%" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="basic-addon2">
    <div class="input-group-append">
        <button type="button" class="btn btn-primary btn-sm" onclick="createCategory()">Create Category</button>
    </div>
</div>
<!--<button type="button" class="btn btn-primary btn-sm" onclick="createCategory()">Create Category</button>-->
<span id="validate"></span>
<table border="1" style="width: 100%; text-align: center">
    <tr class="table">
        <th class="table-primary">STT</th>
        <th class="table-success">NAME</th>
        <th class="table-warning">EDIT</th>
        <th class="table-danger">DELETE</th>
    </tr>
    <tbody id="drawTable">
    </tbody>
</table>
    <script>
        class Category {
            id;
            name;
            constructor(id, name) {
                this.id = id;
                this.name = name;
            }
            getId(){
                return this.id;
            }
            setId(id){
                this.id = id;
            }
            getName(){
                return this.name;
            }
            setName(name){
                this.name = name;
            }

        }

        let listCategory = [];
        let category1 = new Category(1,'Nhạc Trẻ')
        let category2 = new Category(2, 'Nhạc vàng')
        let category3 = new Category(3, 'Nhạc Đỏ')
        let category4 = new Category(4, 'POP')
        listCategory.push(category1, category2, category3, category4);

        function showListCategory() {
            let drawTable = '';
            let count = 0
            for (let i = 0; i < listCategory.length; i++) {
                count++
                drawTable += `<tr class="table table-hover"">
                    <td>${count}</td>
                    <td>${listCategory[i].name}</td>
                    <td><button type="button" class="btn btn-success" onclick="updateCategory(${listCategory[i].id})">Edit</button></td>
                    <td><button type="button" class="btn btn-danger" onclick="deleteCategory(${listCategory[i].id})">Delete</button></td>
                     </tr>`
            }
            document.getElementById('drawTable').innerHTML = drawTable;
        }
        showListCategory();


        function createCategory() {
            let check = true;
            let newCategory = document.getElementById('newCategory').value;
                    if (newCategory.trim() === ''){
                        document.getElementById('validate').innerHTML = '<span style="color: red">The name is required! Please try again!</span>'
                    } else {
                        for (let j = 0; j < listCategory.length; j++) {
                            if (newCategory.toLowerCase() === listCategory[j].name.toLowerCase()){
                                check = false;
                            }
                        }
                        if (check){
                            listCategory.push(new Category(listCategory[listCategory.length-1].id + 1,newCategory));
                            document.getElementById('validate').innerHTML = '<span style="color: blue">Update Success!!</span>'
                        } else {
                            document.getElementById('validate').innerHTML = '<span style="color: red"> Please try again!</span>'
                        }
                    }

            showListCategory();
        }
        function updateCategory(id) {
            let check2 = true;
            for (let i = 0; i < listCategory.length ; i++) {
                if (listCategory[i].id === id){
                    let editCategory = prompt('editCategory: ',listCategory[i].name)
                    if (editCategory.trim() === ''){
                        document.getElementById('validate').innerHTML = '<span style="color: red"> Please try again!</span>'
                    } else {
                        listCategory[i].setName(editCategory)
                    }
                }
            }
            showListCategory();
        }

        function deleteCategory(id) {
            for (let i = 0; i < listCategory.length; i++) {
                if (listCategory[i].id === id){
                    listCategory.splice(i, 1)
                    break;
                }
            }
            showListCategory();
        }


    </script>


</body>
</html>